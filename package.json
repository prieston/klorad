{
  "name": "klorad",
  "private": true,
  "version": "1.0.0",
  "workspaces": [
    "apps/website",
    "apps/editor",
    "apps/admin",
    "packages/*"
  ],
  "scripts": {
    "dev": "concurrently \"pnpm dev:editor\" \"pnpm dev:website\" \"pnpm dev:admin\" --names \"editor,website,admin\" --prefix-colors \"cyan,magenta,yellow\"",
    "dev:editor": "cd apps/editor && pnpm dev",
    "dev:website": "cd apps/website && pnpm dev",
    "dev:admin": "cd apps/admin && pnpm dev",
    "clean": "node scripts/clean.mjs",
    "build": "pnpm -r build --if-present",
    "build:packages": "pnpm -r --filter './packages/*' --workspace-concurrency=1 run build",
    "build:editor": "pnpm build:packages && cd apps/editor && pnpm build",
    "build:website": "pnpm build:packages && cd apps/website && pnpm build",
    "build:admin": "pnpm build:packages && cd apps/admin && pnpm build",
    "analyze:editor": "cross-env ANALYZE=true cd apps/editor && pnpm build",
    "analyze:website": "cross-env ANALYZE=true cd apps/website && pnpm build",
    "analyze:admin": "cross-env ANALYZE=true cd apps/admin && pnpm build",
    "size:editor": "cd apps/editor && size-limit --why || (echo 'Bundle over budget' && exit 1)",
    "size:website": "cd apps/website && size-limit --why || (echo 'Bundle over budget' && exit 1)",
    "size:admin": "cd apps/admin && size-limit --why || (echo 'Bundle over budget' && exit 1)",
    "e2e:editor": "playwright test --project=editor --reporter=line",
    "e2e:website": "playwright test --project=website --reporter=line",
    "e2e": "playwright test --reporter=line",
    "e2e:ci:editor": "start-server-and-test 'pnpm --filter @klorad/editor start' http://localhost:3001 'pnpm e2e:editor'",
    "e2e:ci:website": "start-server-and-test 'pnpm --filter @klorad/website start' http://localhost:3000 'pnpm e2e:website'",
    "lint": "pnpm -r lint",
    "format": "prettier --write \"**/*.{ts,tsx,md}\"",
    "typecheck": "pnpm --filter './packages/*' --filter '!@klorad/prisma' exec bash -c 'if [ -f tsconfig.json ]; then tsc --noEmit --skipLibCheck; else echo \"Skipping - no tsconfig.json\"; fi' && pnpm --filter './apps/*' exec tsc --noEmit --skipLibCheck",
    "typecheck:editor": "cd apps/editor && pnpm exec tsc --noEmit --skipLibCheck",
    "build:check": "pnpm typecheck && pnpm build:packages && cd apps/editor && pnpm build --dry-run || (cd apps/editor && pnpm build)",
    "syncpack:check": "syncpack list-mismatches",
    "syncpack:fix": "syncpack fix-mismatches",
    "validate:core": "pnpm why next react typescript | grep -E '(next|react|typescript)' && echo '✓ Core dependencies locked'",
    "validate": "pnpm syncpack:check && pnpm typecheck && pnpm -r lint",
    "check:clean": "pnpm clean && git diff --quiet || (echo '❌ Working tree dirty after clean' && git status --short && exit 1)",
    "verify:deps": "node scripts/verify-workspace-deps.mjs",
    "audits": "pnpm --filter @klorad/dev-audits audits:core",
    "audits:advisory": "pnpm --filter @klorad/dev-audits audits:advisory",
    "audits:light": "pnpm --filter @klorad/dev-audits audits:light",
    "prisma:generate": "pnpm --filter @klorad/prisma generate",
    "prisma:migrate:dev": "./scripts/migrate.sh dev",
    "prisma:migrate:deploy": "./scripts/migrate.sh deploy",
    "vercel:build:editor": "pnpm prisma:generate && pnpm --filter @klorad/prisma prisma migrate deploy && pnpm clean && pnpm build:packages && cd apps/editor && pnpm build",
    "check:tarball": "pnpm -r --filter ./packages... exec bash -lc 'pnpm pack --pack-destination /tmp && tar -tf /tmp/*.tgz | (grep -E \"(^package/dist/|^package/package.json$)\" && ! grep -E \"package/src/\")'",
    "vercel:build:website": "pnpm build:website",
    "vercel:build:admin": "pnpm prisma:generate && pnpm --filter @klorad/prisma prisma migrate deploy && pnpm clean && pnpm build:packages && cd apps/admin && pnpm build",
    "postinstall": "pnpm prisma:generate",
    "prepare": "husky || true"
  },
  "engines": {
    "node": ">=20 <23",
    "pnpm": ">=9"
  },
  "pnpm": {
    "overrides": {
      "@cesium/engine": "^22.0.0",
      "next": "^15.1.9",
      "react": "^19.2.1",
      "react-dom": "^19.2.1",
      "typescript": "^5.9.0"
    }
  },
  "dependencies": {
    "@klorad/ion-sdk": "workspace:^",
    "@types/react": "^19.0.0",
    "@types/react-dom": "^19.0.0",
    "@typescript-eslint/eslint-plugin": "^7.0.0",
    "@typescript-eslint/parser": "^7.0.0",
    "concurrently": "^9.1.2",
    "eslint": "^8.56.0",
    "eslint-config-prettier": "^9.1.0",
    "next": "15.1.11",
    "prettier": "^3.2.5",
    "react": "^19.2.1",
    "react-dom": "^19.2.1",
    "typescript": "^5.9.0"
  },
  "packageManager": "pnpm@9.12.3",
  "devDependencies": {
    "@babel/parser": "^7.26.0",
    "@babel/traverse": "^7.26.0",
    "@babel/types": "^7.26.0",
    "@next/bundle-analyzer": "^14.0.4",
    "@playwright/test": "^1.56.1",
    "@types/node": "^20.11.30",
    "cross-env": "^10.1.0",
    "eslint-import-resolver-typescript": "^4.4.4",
    "eslint-plugin-import": "^2.32.0",
    "glob": "^11.0.3",
    "husky": "^9.1.7",
    "lint-staged": "^16.2.6",
    "madge": "^8.0.0",
    "playwright": "^1.56.1",
    "rimraf": "^6.1.0",
    "size-limit": "^11.2.0",
    "start-server-and-test": "^2.1.2",
    "syncpack": "^13.0.4",
    "terser-webpack-plugin": "^5.3.14",
    "ts-prune": "^0.10.3",
    "tsup": "^8.0.0",
    "tsx": "^4.20.6"
  }
}
